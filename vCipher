#import <stdio.h>
#import <string.h>
#import <cs50.h>
#import <ctype.h>

#define ALPHASIZE 26;

int makeShift (char, int); 
int shiftCypher(int, int);


int main(int argc, string argv[]){
    
    //declare array to hold key 
    int strLeng = strlen(argv[1]); 
    int  encodStr[strlen(argv[1])]; 

    //Checking to see if the number of arguments is two and that they are non-numeric.
    
    if (argc!= 2) 
    {
        printf("This program needs only one argument.\n");
        return 1; 
    } 
    
    for (int i = 0; i < strLeng; i++)
    {
        if (isalpha(argv[1][i]) == false){
            
            printf("This program's key must be alpha only.\n"); 
            return 1; 
        }
        
    }
    
    //shifting the key to reflect the range 0-26
    
    int key[strlen(argv[1])];
    
    for (int i = 0; i < strLeng; i++){
        
        char keyLetter = argv[1][i]; 
        int intLetter = (int)keyLetter; 
        
        if isupper(keyLetter){
            int keyShift = intLetter - 65;
            key[i] = keyShift;
        } 
        else
        {
            int keyShift = intLetter - 97; 
            key[i] = keyShift;
        }
        printf("%i", key[i]);
        
    }

    //Getting the string from the user to encode. 
    
    string userString = GetString();

    int keyLength = sizeof(key);
    int uLength = strlen(userString);
    
    //WORKING ON THE SHIFT NEXT
    
    for (int i = 0; i < uLength; i++)
    {
        
        char myLetter = userString[i];
        
        if(isalpha(myLetter)){
            
            int intChar = (int)myLetter; 
            
            for (int j = 0; j < keyLength; j++){
                 
                if isupper(myLetter){
                
                    int adjustChar = intChar - 65;
                    int addKey = (adjustChar + key[j]) % 26;
                    printf("%i This is the add key\n", addKey); 
                    int encodedKey = addKey + 65; 
                
                    encodStr[i] = encodedKey; 
                }
                else
                {
                    int adjustChar = intChar - 97; 
                    int addKey = (adjustChar + key[j]) % 26;
                    printf("%i This is the add key\n", addKey); 
                    int encodedKey = addKey + 97; 
                
                    encodStr[i] = encodedKey; 
                }
            }
        }
        else
        {
            encodStr[i] = myLetter; 
        }
        
        printf("%c", encodStr[i]);
        
    }
    printf("\n");
    
}




/*int makeShift (char oldChar, int jKey){

    int intLetter = (int)oldChar;

    if(isupper(oldChar)){
        
        int shiftBegin = intLetter - 65;
        int sumKey = (shiftBegin + jKey) % 26; 
        int shiftLetter = sumKey + 65; 
        
        return shiftLetter; 

    }
    else
    {
        int shiftBegin = intLetter - 97;
        int sumKey = (shiftBegin + jKey) % 26; 
        int shiftLetter = sumKey + 97; 
        
        return shiftLetter; 
    }
}
*/
